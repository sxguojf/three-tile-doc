import{v as M,x as O}from"./framework.BZ48x_LH.js";var P=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return this.None(t)},Out:function(t){return this.None(t)},InOut:function(t){return this.None(t)}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-P.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?P.Bounce.In(t*2)*.5:P.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),g=function(){return performance.now()},E=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(i){return e._tweens[i]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},t.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},t.prototype.update=function(e,i){e===void 0&&(e=g()),i===void 0&&(i=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var a=0;a<n.length;a++){var s=this._tweens[n[a]],r=!i;s&&s.update(e,r)===!1&&!i&&delete this._tweens[n[a]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),T={Linear:function(t,e){var i=t.length-1,n=i*e,a=Math.floor(n),s=T.Utils.Linear;return e<0?s(t[0],t[1],n):e>1?s(t[i],t[i-1],i-n):s(t[a],t[a+1>i?i:a+1],n-a)},Utils:{Linear:function(t,e,i){return(e-t)*i+t}}},C=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),I=new E,k=function(){function t(e,i){i===void 0&&(i=I),this._object=e,this._group=i,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=P.Linear.None,this._interpolationFunction=T.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=C.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,i){if(i===void 0&&(i=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=i<0?0:i,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,i){if(e===void 0&&(e=g()),i===void 0&&(i=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||i){if(this._propertiesAreSetUp=!0,!this._isDynamic){var a={};for(var s in this._valuesEnd)a[s]=this._valuesEnd[s];this._valuesEnd=a}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,i)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,i,n,a,s){for(var r in n){var h=e[r],l=Array.isArray(h),c=l?"array":typeof h,f=!l&&Array.isArray(n[r]);if(!(c==="undefined"||c==="function")){if(f){var o=n[r];if(o.length===0)continue;for(var _=[h],d=0,p=o.length;d<p;d+=1){var y=this._handleRelativeValue(h,o[d]);if(isNaN(y)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}_.push(y)}f&&(n[r]=_)}if((c==="object"||l)&&h&&!f){i[r]=l?[]:{};var u=h;for(var v in u)i[r][v]=u[v];a[r]=l?[]:{};var o=n[r];if(!this._isDynamic){var S={};for(var v in o)S[v]=o[v];n[r]=o=S}this._setupProperties(u,i[r],o,a[r],s)}else(typeof i[r]>"u"||s)&&(i[r]=h),l||(i[r]*=1),f?a[r]=n[r].slice().reverse():a[r]=i[r]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(e){return e===void 0&&(e=g()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},t.prototype.resume=function(e){return e===void 0&&(e=g()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},t.prototype.stopChainedTweens=function(){for(var e=0,i=this._chainedTweens.length;e<i;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e===void 0&&(e=I),this._group=e,this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=P.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=T.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,i){var n=this,a;if(e===void 0&&(e=g()),i===void 0&&(i=!0),this._isPaused)return!0;var s,r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>r)return!1;i&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var h=e-this._startTime,l=this._duration+((a=this._repeatDelayTime)!==null&&a!==void 0?a:this._delayTime),c=this._duration+this._repeat*l,f=function(){if(n._duration===0||h>c)return 1;var u=Math.trunc(h/l),v=h-u*l,S=Math.min(v/n._duration,1);return S===0&&h===n._duration?1:S},o=f(),_=this._easingFunction(o);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,_),this._onUpdateCallback&&this._onUpdateCallback(this._object,o),this._duration===0||h>=this._duration)if(this._repeat>0){var d=Math.min(Math.trunc((h-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=d);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,y=this._chainedTweens.length;p<y;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,i,n,a){for(var s in n)if(i[s]!==void 0){var r=i[s]||0,h=n[s],l=Array.isArray(e[s]),c=Array.isArray(h),f=!l&&c;f?e[s]=this._interpolationFunction(h,a):typeof h=="object"&&h?this._updateProperties(e[s],r,h,a):(h=this._handleRelativeValue(r,h),typeof h=="number"&&(e[s]=r+(h-r)*a))}},t.prototype._handleRelativeValue=function(e,i){return typeof i!="string"?i:i.charAt(0)==="+"||i.charAt(0)==="-"?e+parseFloat(i):parseFloat(i)},t.prototype._swapEndStartRepeatValues=function(e){var i=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=i},t}();C.nextId;var b=I;b.getAll.bind(b);b.removeAll.bind(b);b.add.bind(b);b.remove.bind(b);var A=b.update.bind(b),w=function(){var t=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(f){f.preventDefault(),n(++t%e.children.length)},!1);function i(f){return e.appendChild(f.dom),f}function n(f){for(var o=0;o<e.children.length;o++)e.children[o].style.display=o===f?"block":"none";t=f}var a=(performance||Date).now(),s=a,r=0,h=i(new w.Panel("FPS","#0ff","#002")),l=i(new w.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=i(new w.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:e,addPanel:i,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){r++;var f=(performance||Date).now();if(l.update(f-a,200),f>=s+1e3&&(h.update(r*1e3/(f-s),100),s=f,r=0,c)){var o=performance.memory;c.update(o.usedJSHeapSize/1048576,o.jsHeapSizeLimit/1048576)}return f},update:function(){a=this.end()},domElement:e,setMode:n}};w.Panel=function(t,e,i){var n=1/0,a=0,s=Math.round,r=s(window.devicePixelRatio||1),h=80*r,l=48*r,c=3*r,f=2*r,o=3*r,_=15*r,d=74*r,p=30*r,y=document.createElement("canvas");y.width=h,y.height=l,y.style.cssText="width:80px;height:48px";var u=y.getContext("2d");return u.font="bold "+9*r+"px Helvetica,Arial,sans-serif",u.textBaseline="top",u.fillStyle=i,u.fillRect(0,0,h,l),u.fillStyle=e,u.fillText(t,c,f),u.fillRect(o,_,d,p),u.fillStyle=i,u.globalAlpha=.9,u.fillRect(o,_,d,p),{dom:y,update:function(v,S){n=Math.min(n,v),a=Math.max(a,v),u.fillStyle=i,u.globalAlpha=1,u.fillRect(0,0,h,_),u.fillStyle=e,u.fillText(s(v)+" "+t+" ("+s(n)+"-"+s(a)+")",c,f),u.drawImage(y,o+r,_,d-r,p,o,_,d-r,p),u.fillRect(o+d-r,_,r,p),u.fillStyle=i,u.globalAlpha=.9,u.fillRect(o+d-r,_,r,s((1-v/S)*p))}}};function x(t){const e=new w;return M(()=>{const i=t.value;i?(e.showPanel(0),e.dom.style.position="relative",i.appendChild(e.dom)):console.error("addStats: Stats Container not found")}),O(()=>{const i=t.value;i&&i.removeChild(e.dom)}),e}export{P as E,k as T,x as a,A as u};
